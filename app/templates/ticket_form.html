{% extends 'base.html' %} {% block content %}
<h1 class="h4 mb-3">{{ 'Edit Ticket' if ticket else 'New Ticket' }}</h1>
<form method="post" class="card card-body">
  <div class="row g-3">
    <div class="col-md-4">
      <label class="form-label">Vehicle (License Plate)</label>
      <select name="LicensePlate" class="form-select" required>
        <option value="" disabled {{ 'selected' if not (ticket and ticket.LicensePlate) }}>Select...</option>
        {% for v in vehicles %}
        <option value="{{ v.LicensePlate }}" {{ 'selected' if ticket and ticket.LicensePlate == v.LicensePlate }}>
          {{ v.LicensePlate }} - {{ v.Model }}
        </option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">Spot</label>
      <select name="SpotID" class="form-select" required>
        <option value="" disabled {{ 'selected' if not (ticket and ticket.SpotID) }}>Select...</option>
        {% for s in spots %}
        <option value="{{ s.SpotID }}" {{ 'selected' if ticket and ticket.SpotID == s.SpotID }}>
          {{ s.SpotNumber }} ({{ s.SpotType }})
        </option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-4">
      <label class="form-label">Rate</label>
      <select name="RateID" class="form-select" required>
        <option value="" disabled {{ 'selected' if not (ticket and ticket.RateID) }}>Select...</option>
        {% for r in rates %}
        <option value="{{ r.RateID }}" {{ 'selected' if ticket and ticket.RateID == r.RateID }}>
          {{ r.VehicleType }} / {{ r.SpotType }} - â‚¹{{ r.RatePerHour }} per hr
        </option>
        {% endfor %}
      </select>
    </div>
    <div class="col-md-6">
      <label class="form-label">Entry Time</label>
      <input name="EntryTime" class="form-control" placeholder="YYYY-MM-DD HH:MM:SS" value="{{ ticket.EntryTime if ticket }}" required />
    </div>
    <div class="col-md-6">
      <label class="form-label">Exit Time</label>
      <input name="ExitTime" class="form-control" placeholder="YYYY-MM-DD HH:MM:SS" value="{{ ticket.ExitTime if ticket }}" />
    </div>
  </div>
  <div class="mt-3">
    <button class="btn btn-success">Save</button>
    <a href="/tickets" class="btn btn-secondary">Cancel</a>
  </div>
</form>
{% endblock %}

